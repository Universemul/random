<html><head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">

<title>EECS 485: Assignment 1</title>
</head><body>

<h1>Assignment 1: Server Setup</h1>

<p>
Due Friday, January 15, 2010

</p><p>
This assignment introduces you to the software tools which provide
the backend for the website you will be building in this course.

</p><ul>
<li> Linux operating system

</li><li> Apache web server
</li><li> MySQL database 
</li><li> PHP programming language
</li></ul>

<p>
These four tools together are commonly referred to as "LAMP".
This platform is widely used to implement e-commerce sites, wikis,
blogs, and any other sort of database-backed, dynamic website.

</p><h2>
Part 1 (0 Points): Log in to your development machine
</h2>

<p>
This is a group assignment.  After forming your group, you will
receive an email with the following information:

</p><ul>

<li> The hostname of the machine which will run your website
	(e.g. eecs485-2.eecs.umich.edu)
</li><li> A port number (e.g. 12345) 
</li><li> A string of random characters (e.g. abcdefghij)
</li><li> A user name (e.g. group1)
</li></ul>

<p>
The hostname is the name of the Linux machine which will run your
website.  Members of your group can log into this machine via SSH,
using the user name provided, and the random string as a password.
You may change this password if you wish.

</p><p>
You should see the following directories in your group's home directory:

</p><ul>
<li> <b>conf:</b> configuration files for Apache

</li><li> <b>log:</b> log files for your Apache
<!-- </li><li> <b>mysql:</b> configuration, log, and data files for your MySQL database -->
</li><li> <b>html:</b> location of code for your group's website
</li></ul>

<p>
If you are unable to log in to your development machine, please let
<a href="mailto:vahed@umich.edu">vahed@umich.edu</a> know right away.

</p><h2>

Part 2 (40 points): Configure the tools
</h2>

<p>
You will not have administrative access to your development machine.
However, it is not required; Apache and MySQL will happily run as a
normal user, provided they are configured appropriately.  In this
portion of the assignment you will use the provided configuration
files for MySQL and Apache, start the servers, and display a simple
web page which will display correctly only when all the tools are
working together.

</p><h3>
Part 2a: Starting Apache
</h3>

<p>
The following website is the official documentation for the version
of Apache which we use in this course.

<a href="http://httpd.apache.org/docs/2.2/">
http://httpd.apache.org/docs/2.2/
</a>

</p><p>
We have prepared a baseline Apache configuration for you, in
the conf/ directory of your group's home directory.
Start Apache with the following command:


</p><pre>/usr/sbin/apache2ctl -f ~/conf/apache2.conf -k start
</pre>

Also, you can stop Apache by the following command:

</p><pre>/usr/sbin/apache2ctl -f ~/conf/apache2.conf -k stop
</pre>

<p>
Further documentation on the apachectl program can be found here:

<a href="http://httpd.apache.org/docs/2.2/programs/apachectl.html">
http://httpd.apache.org/docs/2.2/programs/apachectl.html
</a>

</p><p>
At this point you should be able to point a web browser at your site's
hostname and port number, and a message should appear.

</p><h3>
Part 2b: Individual programming assignment directories

</h3>

<p>
For programming assignment 1, we will be checking the website at the
following URL:

</p><pre>http://$host:$port/$secret/pa1
(e.g. http://eecs485-1.eecs.umich.edu:12345/abcdefghij/pa1)
</pre>

<p>
Each programming assignment must have its own directory within the
directory with the same name as the secret random string assigned to
your group.

</p><p>
You will be building your website incrementally throughout the entire
semester.  In order for your site to be evaluated for each assignment,
we require that you make a fresh copy of your entire site for each
programming assignment.  That is, after completing assignment 1,
make a copy and start working on assignment 2 on the copy.  Do *not*
modify files within a programming assignment directory after completing
the assignment; we will use the last-modified-date of the files to
determine if points should be deducted for lateness.

</p><p>
For this assignment, the index.php file in the pa1 directory must
display correctly in a web browser--that is, the version numbers of
Apache, MySQL, and PHP must be displayed on that web page.  You do
not need to modify the provided index.php file.

<!--
</p><h3>
Part 2c: Starting MySQL
</h3>

<p>
The following websites are the official documentation for MySQL.
You may find many more tutorials on the Internet.

<a href="http://dev.mysql.com/doc/refman/4.1/en/tutorial.html">
http://dev.mysql.com/doc/refman/4.1/en/tutorial.html
</a>

</p><p>
The <b>mysql/</b> directory contains configuration and log files for MySQL,
as well as a data directory which contains the actual contents
of the database.  The <b>my.cnf</b> file is the configuration for MySQL.
You do not need to modify this file for the assignment.

</p><p>
To start the MySQL server, use the following command.

</p><pre>setsid mysqld_safe --defaults-file=~/mysql/my.cnf &lt;/dev/null &amp;&gt;~/mysql/mysqld.out
</pre>

<p>
If you need to stop the MySQL server for some reason, use the
following command:

</p><pre>mysqladmin --defaults-file=~/mysql/my.cnf -u root shutdown
</pre>
-->

<h3>
Part 2d: Check your website

</h3>

<p>
With Apache running, check the webpage in the pa1 directory,
and ensure that all of the version numbers appear.

</p><h2>
Part 3 (60 points): Apache log files
</h2>

<p>
In this part of the assignment, you will modify Apache's configuration
to generate access logs, analyze the performance impact of logging
the hostname of machines accessing the web server, and write up your
analysis on another web page inside the pa1 directory of your site.

</p><p>
The following are relevant pages of the Apache manual.

</p><ul>
<li>
<a href="http://httpd.apache.org/docs/2.2/logs.html">
http://httpd.apache.org/docs/2.2/logs.html
</a>

</li><li>
<a href="http://httpd.apache.org/docs/2.2/mod/core.html">
http://httpd.apache.org/docs/2.2/mod/core.html
</a>
</li><li>
<a href="http://httpd.apache.org/docs/2.2/mod/mod_log_config.html">
http://httpd.apache.org/docs/2.2/mod/mod_log_config.html
</a>
</li></ul>

<h3>
Part 3a: Enabling access logging
</h3>

<p>
The access log is controlled by the directive <tt>CustomLog</tt> in <b>conf/sites-available/default</b><br>

To enable logging simply uncomment this line:
</p>
<tt>CustomLog log/access.log combined</tt><p>
This line indicates that access logs are stored in <b>log/access.log</b>.<br> <tt>combined</tt> is a <tt>LogFormat</tt> that is defined in <b>conf/apache2.conf</b>:</p>

<tt>LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined </tt>
 
<p>
<tt>LogFormat</tt> specifies what information to log for each connection.

</p><p>
Restart Apache (as you must do after any configuration file change),
and reload your pa1/index.php file a few times, and see what ends up
in the logs.  You can also try loading files which are not present
on your site, and see what Apache has to say in both the access log
and the error log.

</p><h3>
Part 3b: Measuring performance
</h3>

<p>
Logging web server accesses provides useful information to a website
administrator.  However, poorly configured logging can result in
degraded web server performance.  One such configuration element is
"hostname logging"--recording the hostname, and not simply the IP
address, of client machines.

</p><p>
In order to measure the performance of the web server, we are providing a
program called <a href="http://www-personal.umich.edu/~vahed/eecs485/bang.zip">bang</a>, which requests your pa1/index.php file 1000 times, and reports the amount of time taken to satisfy those
requests.  Bang can be run on any Intel-based machine running Linux.


</p><p>
You will run bang in four configurations: one with no logging, and three
others, corresponding to the three different levels of hostname
logging provided by Apache.  The websites mentioned above should help
you discover the appropriate configuration element. Hint: you need add only one more line to <b>conf/apache2.conf</b>

</p><p>
Report your findings in a web page called pa1/results.html.  The page
need not be beautiful; simply report the results returned by bang,
and write up a brief explanation of the results.

</p></body></html>
