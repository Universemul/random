<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="949.54">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: center; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: center; font: 12.0px Helvetica; min-height: 14.0px}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Courier}
    span.Apple-tab-span {white-space:pre}
  </style>
</head>
<body>
<p class="p1"><b>Project 4 Corrections and Clarifications</b></p>
<p class="p1"><b>Updated 3/17/10</b></p>
<p class="p1"><b>Most recent items appear first</b></p>
<p class="p1"><b>Page numbers refer to the pdf document</b></p>
<p class="p2"><br></p>
<p class="p1"><b>NOTICE:</b></p>
<p class="p1"><b>This document is part of the project specifications.</b></p>
<p class="p1"><b>Your solution must follow these corrections and clarifications.</b></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p4"><b>P. 10. Yet further correction and clarification of set_load_destination, set_unload_destination.<span class="Apple-converted-space"> </span></b></p>
<p class="p4">Enough people were puzzled by my attempt to use compact and simple language here; now it is clear that it needs to be more explicit.</p>
<p class="p3"><br></p>
<p class="p4"><i>Change 1-4 to the following:</i></p>
<p class="p4">Do the following 4 checks in this order:</p>
<p class="p3"><br></p>
<p class="p4">1. If the ship state is Docked:</p>
<p class="p4">if we are at the loading destination, set the state to Loading and do nothing further;</p>
<p class="p4">if we are at the unloading destination, set the state to Unloading and do nothing further.</p>
<p class="p3"><br></p>
<p class="p4">2. If the ship state is not moving:<span class="Apple-converted-space"> </span></p>
<p class="p4">if we can dock at the loading destination, do so, and set the state to Loading and do nothing further;</p>
<p class="p4">if we can dock at the unloading destination, do so, and set the state to Unloading and do nothing further.</p>
<p class="p3"><br></p>
<p class="p4">3. If the cargo amount is zero:<span class="Apple-converted-space"> </span></p>
<p class="p4">use the Ship member function to start moving to the loading destination position at maximum speed, set the state to Moving to Loading, and do nothing further.</p>
<p class="p3"><br></p>
<p class="p4">4. If the cargo amount is greater than zero:</p>
<p class="p4">use the Ship member function to start moving to the unloading destination position at maximum speed, set the state to Moving to Unloading, and nothing further.</p>
<p class="p3"><br></p>
<p class="p4"><i>Explanation:</i></p>
<p class="p4">1. We see if we are already docked at one of the destinations and act accordingly.</p>
<p class="p4">2. We aren't docked at one of the destinations, but we might be able to dock at one, and then do like #1.</p>
<p class="p4">3. We aren't at one of the destinations - we might be stopped somewhere, or moving, but either way, if we have no cargo, we'll start with loading some.</p>
<p class="p4">4. Where we are is like #3, but we have some cargo, so we'll start with unloading it.</p>
<p class="p3"><br></p>
<p class="p4"><b>P. 8, 9. Unlike the diagram, text of Ship behavior specification allows a transition from Docked to Stopped.</b></p>
<p class="p4">As specified, the stop function does not throw an exception if the ship is docked, but rather will change the state from Docked to Stopped. This disagrees with the transition diagram. Your code should follow the written specification.This discrepancy does not affect any of the tests - none involve telling a docked ship to stop.</p>
<p class="p3"><br></p>
<p class="p4"><b>P. 5, various skeleton header files. "Unit time" is 1 tick, an hour of simulated time.</b></p>
<p class="p4">This was not as explicit as it should have been.</p>
<p class="p3"><br></p>
<p class="p4"><b>P. 10. Further correction of set_load_destination, set_unload_destination. Case #2 also does nothing further.</b></p>
<p class="p4"><i>Change:</i></p>
<p class="p4">2. If the ship state is not moving, and we can dock at the loading destination, do so, and set the state to Loading, and correspondingly if we can dock at the unloading destination.</p>
<p class="p4"><i>To:</i></p>
<p class="p4">2. If the ship state is not moving, and we can dock at the loading destination, do so, and set the state to Loading, and do nothing further. Do the corresponding if we can dock at the unloading destination.</p>
<p class="p3"><br></p>
<p class="p4"><b>Samples (and solution) had a spelling error in a Tanker message that disagreed with istrings.txt. Sample and tests have been fixed.</b></p>
<p class="p4">The instructor's solution formerly output the Tanker error message:</p>
<p class="p4">"Load and unload cargo <b>distinations</b> are the same!"</p>
<p class="p4">But the corresponding text in strings.txt spells "destinations" correctly.<span class="Apple-converted-space">  </span>I failed to make the correction in the solution code.<span class="Apple-converted-space">  </span>Only a couple of<span class="Apple-converted-space">  </span>autograder tests were affected (Sample errors and Test #7). The affected sample (errors) was fixed and also the relevant autograder tests as of 7:55 PM 3/12/10.<span class="Apple-converted-space">  </span>So use the message already in strings.txt and check that you match the new version of the Errors sample.<span class="Apple-converted-space"> </span></p>
<p class="p3"><br></p>
<p class="p4"><b>skeleton_Ship.cpp. Corrected version of calculate_movement() now uploaded as of 3/11/2010 11:20 PM.</b></p>
<p class="p4">An incorrect version of the this function was in the original upload - the final fuel consumption was computed incorrectly. The samples were generated with this version. If you have already downloaded this file, get a fresh download. If you have already written Ship.cpp, use the fresh download and replace the old calculate_movement function with this version. I apologize for the inconvenience.</p>
<p class="p3"><br></p>
<p class="p4"><b>P. 10. Clarification of set_load_destination, set_unload_destination. Tanker state should be set in cases #3 and #4.</b></p>
<p class="p4"><i>Change:</i></p>
<p class="p4">3. If the cargo amount is zero, use the Ship member function to start moving to the loading destination position at maximum</p>
<p class="p4">speed, and do nothing further.</p>
<p class="p4">4. Otherwise, similarly start moving to the unloading destination.</p>
<p class="p4"><i>To:</i></p>
<p class="p4">3. If the cargo amount is zero, use the Ship member function to start moving to the loading destination position at maximum</p>
<p class="p4">speed, set the state to Moving to Loading, and do nothing further.</p>
<p class="p4">4. Otherwise, similarly set the state and start moving to the unloading destination.</p>
<p class="p3"><br></p>
<p class="p4"><b>P. 7. Dependencies for Model: Model.cpp needs Geometry.h, but gets it anyway.</b></p>
<p class="p4">The scheme followed in the description of the dependences generally doesn't describe dependencies more than one back - e.g. Cruiser depends only on Warship, but Warship depends on Ship, and so forth. Model.cpp will have to use the Point class directly, but note that Model.cpp will need to #include Sim_object.h anyway, and that will #include Geometry.h. So Model.cpp was not described as depending on Geometry. According the header file guidelines, it is optional whether Model.cpp needs to separately #include Geometry.h.<span class="Apple-converted-space"> </span></p>
<p class="p3"><br></p>
<p class="p4"><b>P. 9. Ship update() function description.<span class="Apple-converted-space">  </span>Check of sinking isn't specified if resistance == 0</b></p>
<p class="p4"><i>Change:</i></p>
<p class="p4">1. If this Ship is still afloat, check the resistance. If the resistance is greater than zero, go to the update of the afloat state</p>
<p class="p4">below - we aren't sinking. If the resistance is less than 0, set the state to Sinking, output "sinking", and do nothing further</p>
<p class="p4">in this update.</p>
<p class="p4"><i>To:</i></p>
<p class="p4">1. If this Ship is still afloat, check the resistance. If the resistance is greater than or equal to zero, go to the update of the afloat state</p>
<p class="p4">below - we aren't sinking. If the resistance is less than 0, set the state to Sinking, output "sinking", and do nothing further</p>
<p class="p4">in this update.</p>
<p class="p3"><br></p>
<p class="p4"><b>P. 9, skeleton_Ship.h. Error thrown by stop() function is same as the start-moving functions.</b></p>
<p class="p4">If you tell a ship to stop, but it can't move anyway, it is an Error and the same exception should be thrown as in set_destination_position_and_speed - namely "Ship cannot move!" Note that a ship cannot move either because it is dead in the water or it is sinking - which is the inverse of what the function Ship::can_move() returns.</p>
<p class="p4"><i>On p.9, change:</i></p>
<p class="p4"><b>stop. </b>Throw an Error if the ship cannot move (it may be Dead in the Water or not Afloat).</p>
<p class="p4"><i>To:</i></p>
<p class="p4"><b>stop. </b>Throw an Error that the ship cannot move if it is Dead in the Water or in one of the sinking process states (not Afloat).</p>
<p class="p4"><i>In skeleton_Ship.h, change:</i></p>
<p class="p5"><span class="Apple-converted-space">     </span>// may throw Error("Ship is dead in the water!");</p>
<p class="p4"><i>To:</i></p>
<p class="p5"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span></span>// may throw Error("Ship cannot move!")</p>
<p class="p3"><br></p>
<p class="p4"><i>Explanation:</i> Being dead in the water is not the same as sinking, but in either case, the ship can't respond to movement instructions, and so should have a response that applies to both cases. I made this change to the code but failed to update all of the specifications.</p>
<p class="p3"><br></p>
</body>
</html>
