using System;
using System.Collections.Generic;
using System.Linq;

namespace AdventOfCode
{
    public static class Day20
    {
        // http://adventofcode.com/2016/day/20
        //
        // --- Day 20: Firewall Rules ---
        //
        // You'd like to set up a small hidden computer here so you can use it to get back into the network later. However, the corporate firewall only allows communication
        // with certain external IP addresses.
        //
        // You've retrieved the list of blocked IPs from the firewall, but the list seems to be messy and poorly maintained, and it's not clear which IPs are allowed. Also,
        // rather than being written in dot-decimal notation, they are written as plain 32-bit integers, which can have any value from 0 through 4294967295, inclusive.
        //
        // For example, suppose only the values 0 through 9 were valid, and that you retrieved the following blacklist:
        // 5-8
        // 0-2
        // 4-7
        // The blacklist specifies ranges of IPs (inclusive of both the start and end value) that are not allowed.Then, the only IPs that this firewall allows are 3 and 9,
        // since those are the only numbers not in any range.
        //
        // Given the list of blocked IPs you retrieved from the firewall (your puzzle input), what is the lowest-valued IP that is not blocked?
        // 2803551464-2812875810\n3863319608-3871068145\n881357481-892360003\n1109987968-1119969449\n3658860150-3661459953\n3315323905-3317364128\n4198570301-4213558177\n3652285991-3657587289\n1721298471-1722969206\n3232746849-3243358546\n1661068675-1662703862\n3675435883-3682716625\n1266177355-1267536576\n3868442553-3886066408\n1163754899-1168776503\n2038125438-2040532211\n2113199153-2129200429\n278716595-280702917\n447807401-468043406\n456478106-473088994\n1565862083-1581382324\n2426641191-2433649580\n3769379795-3770350023\n4042653019-4049531142\n3158919914-3172421287\n2604844963-2639161233\n3503237453-3554722462\n4190047494-4193508873\n1508094238-1525307740\n3966816125-3967809178\n153714142-202056631\n2501046140-2510963167\n3465635759-3503237451\n2281340669-2298789211\n1947117382-1967928419\n3554722463-3555159981\n2895819105-2902788319\n3663372904-3664569864\n972483691-975740796\n3103264896-3104355798\n1231082782-1241462802\n677329322-682803315\n4213558179-4263517130\n3733652773-3738472991\n2757807191-2766006676\n3659397827-3662123747\n2014222939-2022150246\n1519490935-1524525631\n2666464202-2678020657\n3676123771-3682875356\n2015665014-2020521963\n109371500-147527150\n294104105-295883568\n1187924694-1192867337\n233912451-268480586\n2412805636-2418891676\n817894379-821825729\n1395482208-1396601076\n3562787574-3582066957\n1636231691-1643851704\n2540574931-2577465973\n3678820167-3692907105\n3317210708-3346205871\n4288708469-4290878845\n1879088166-1925495249\n701025730-744031556\n3423726238-3449088494\n1909393974-1932233877\n1624595706-1638169891\n3967809180-3968979908\n777390928-787119986\n1785937011-1790894471\n359962895-374210080\n854620758-857295870\n3063588727-3074066568\n1433213216-1440086675\n2803878786-2807170810\n2329364922-2341004103\n1779308956-1813426614\n3404134972-3406935359\n1395206729-1399335725\n3508058831-3545265293\n1116027046-1140771866\n2195488600-2201400029\n2604784575-2604844961\n3249582504-3249904321\n3359093168-3389555121\n672414721-685495729\n1676765380-1707877434\n2195210206-2200373110\n2283189431-2295462864\n612834977-633513429\n766576814-777176781\n4213760180-4245027356\n3406935361-3423726237\n3420461762-3447108396\n1235496789-1257178615\n173628319-178025658\n261376069-266145441\n222446472-225105299\n2415523644-2426548029\n1659538503-1661276593\n2093459328-2102469885\n2208927482-2216619804\n3256205940-3256690370\n442613372-455667187\n143074490-143749172\n1735254052-1746870707\n343474171-361691685\n1216387933-1258035838\n2791688067-2800464615\n1779703537-1781066111\n931109619-959468702\n3909752583-3914528328\n1091036396-1105617839\n1885451799-1903144828\n2641179046-2650174969\n3313303611-3315819551\n1788713502-1810384207\n3276737391-3277290125\n3686124913-3694782332\n4049057301-4050036879\n1320547253-1367813733\n3049327526-3076973970\n3925548387-3949355784\n3860805956-3906597931\n121451892-126310872\n208485480-212030275\n1335156808-1354949720\n852919988-853348876\n720375531-737074971\n959468704-971778204\n3616550273-3624309509\n2188151246-2188588728\n780323861-799483097\n1233973486-1251692781\n1438953538-1442443946\n3015669375-3041261940\n1294214596-1305474448\n208089104-220602374\n4039335554-4045707360\n2824055773-2838804608\n3969004038-3980638333\n1170304116-1171741344\n1924952282-1930448454\n2342839060-2380256693\n1280565768-1283231378\n2457571349-2477679245\n3862937291-3868543833\n2871096736-2886900309\n1105617840-1109987966\n3677109966-3683234485\n2187877708-2188292669\n4272688785-4294967295\n3295756457-3325150392\n973279191-978223783\n3878333697-3888847760\n1780876174-1781157600\n2766006677-2767646529\n2841853108-2849654093\n2299057510-2321389996\n700255162-733629340\n2271482758-2286733678\n722098296-739587091\n2553444501-2557591380\n4083439109-4086123206\n2915859231-2961422396\n3061273996-3087247705\n71153829-103801748\n3758297347-3759901378\n2059683083-2067457615\n3582066959-3637753218\n1606122310-1608956523\n2229509702-2254991017\n2187668151-2188163549\n2109717235-2110775852\n973527207-975315519\n1561887968-1565862081\n1516813386-1527201518\n3430335169-3434512116\n637793982-650797362\n59648493-88472995\n595008931-601889180\n4099377796-4128797762\n456719390-472256132\n1799147975-1818999763\n3664059641-3665285914\n235916842-267928464\n3192431703-3211229502\n2506865442-2530124433\n317547190-329175540\n875265848-900708946\n1880550692-1892730911\n1925495250-1947117380\n2593120814-2594557710\n1582158974-1586342876\n3668520063-3712776828\n3814375697-3823522563\n2214942913-2218843768\n322731329-334606123\n1132318778-1167221938\n3637753219-3651531792\n2304025116-2314660343\n3076973971-3094326866\n1751188975-1770447553\n2292741635-2313534240\n1096063406-1097985283\n171054648-203847062\n1279185659-1285305251\n218575107-223805742\n2695974731-2703850693\n3015465123-3036118969\n900708948-913353493\n285956515-300687655\n2835184574-2849398108\n1830648432-1854550606\n24226177-52899821\n3913307348-3915120228\n709805409-750716092\n3914528329-3921545630\n2357158200-2379142732\n1580605862-1599619384\n1633939788-1638760323\n694182947-720239612\n114180253-122443349\n135274241-141236389\n1330410519-1361552379\n2412255194-2426641190\n1349483516-1373026874\n2650174971-2688443883\n116680049-152589875\n107795550-116339751\n1626255610-1627749930\n365704999-369767992\n944383883-947543513\n3274933652-3276799835\n836029143-841012740\n206685245-209556385\n2323037977-2325938879\n2769296404-2791688066\n2297334096-2315320952\n2160389008-2187512585\n1454896024-1484661305\n114948651-118502994\n578033974-580295450\n685495731-749808282\n1270899549-1276643860\n513961497-530771780\n211454341-216664031\n2936207952-2939731619\n1512214853-1534334525\n3059332534-3064532931\n2552656467-2566664334\n400979593-408567879\n925517547-953896754\n2761576742-2761959986\n3555169607-3559462489\n2812875812-2824264301\n2779463262-2786954760\n139313286-147006619\n2353857022-2386604140\n982596329-993066494\n3883902084-3890491738\n14276376-14715040\n140307640-141422463\n3806843586-3810748719\n2347798972-2375546160\n3325150393-3330314771\n4121937465-4145149271\n2962523945-2962832532\n1266915255-1277451820\n3759184321-3760728108\n1042439096-1075737119\n749808283-753078138\n2415727707-2417129852\n3125813780-3158919913\n2141324196-2165240019\n3968979909-4020983158\n3652566174-3652811220\n321199093-335755679\n3046792179-3051753297\n1098495330-1099546156\n2604753232-2604793722\n1862387736-1865564891\n2192793959-2202839050\n2051192988-2062082965\n2557781180-2564684368\n3731887024-3735627111\n2759326292-2766862646\n105999228-114717327\n2146740774-2175585846\n1040408590-1060035405\n915828469-955654421\n2363804509-2365163485\n3948153155-3950758052\n3391750312-3404134971\n2772699877-2774841115\n792609079-802941037\n1119187290-1132318777\n671982481-677760085\n3327509782-3354044053\n271583813-279723779\n408567880-411426277\n2445571312-2486950067\n252000432-271583811\n506925272-513961495\n2365381207-2396847596\n635392808-670044564\n1588066879-1606122309\n2931542740-2938986525\n2109256412-2109771575\n3736474726-3739799756\n781943416-805793862\n10071776-14276375\n3230850634-3231395673\n1660725925-1662714652\n4086903988-4087464424\n4070040103-4086645627\n3213756608-3259325969\n945742841-952576664\n2324657388-2332536987\n2414450355-2423505266\n1869147202-1870835953\n890249566-896198589\n2967360210-3014717075\n1836402422-1845546461\n2149565922-2161600962\n1204370924-1209027465\n2380256694-2386504270\n2229421324-2239778067\n3984204506-3989543212\n2767646531-2781228246\n1048423406-1091036394\n214736602-224127152\n1069306050-1083641951\n1781258836-1790882660\n4157295205-4182675293\n1520299787-1555007003\n3173677946-3176672268\n2275026767-2299863656\n2196014210-2206264513\n836408749-847859546\n2212601866-2217310020\n2967131212-3007224649\n1408935700-1429989498\n1834012279-1862387734\n1501557594-1509143794\n1493417575-1516000767\n808033265-814911993\n3555159983-3559611965\n293029869-300515629\n3062492778-3075018660\n2409773786-2423687676\n2325824819-2338710927\n583617536-589049485\n3912733726-3913993919\n2088007342-2113199152\n2715226105-2748285939\n1867576901-1876702109\n1293224839-1301350883\n4047144971-4050020289\n2973100941-2977140796\n68728696-93299445\n4086674018-4087763373\n8898161-12610188\n2760389636-2761144710\n1349766780-1357040917\n1574999391-1592558418\n4171544034-4177450527\n913353494-954475810\n3302317467-3343577619\n1003762868-1009500925\n3172421289-3178727110\n7930590-8742990\n21462141-57214240\n3222102431-3236579911\n2642830-10503093\n4087763374-4108979938\n1688152784-1725485652\n3921545632-3965661350\n646391125-657162937\n4057318954-4071681125\n1400108869-1405791325\n3754968516-3766077150\n2388970328-2392263662\n3453741880-3495044825\n2761642219-2762087520\n2615095071-2615439669\n563986267-622503249\n2912214767-2914590567\n792865674-795027495\n3618700153-3640992852\n1735982768-1742271760\n2718807926-2725985595\n132128650-139247192\n940623358-957999403\n136939212-143795000\n1047489840-1067499988\n4027166112-4043494417\n2163081404-2163688672\n3924386877-3964777074\n879041395-892669762\n3952771042-3962091261\n2414986463-2415830365\n414180419-420830474\n2239509990-2255431833\n1754732468-1760775166\n506563152-508625398\n1463126781-1478456421\n2033220699-2033540204\n1296021829-1301063981\n172777910-194982125\n3062422795-3069889126\n150826626-153494338\n3699752742-3704811141\n1873077685-1879088164\n3608954677-3644201717\n3803217008-3821838904\n3128596616-3149825732\n1818999765-1821895317\n3699877667-3705348171\n813416483-814897292\n2620443984-2621829586\n1962326862-1963413571\n1417173761-1448538149\n3184138688-3192431701\n3357092321-3366945022\n3145764671-3167784186\n2927609635-2937983943\n994567590-1010121042\n1661060307-1663385037\n2855838759-2883585467\n1463515352-1466425964\n2926027272-2931205457\n3527680952-3535484023\n2961422398-2962550873\n818654023-828591070\n4148775181-4161021581\n1624701609-1627275903\n3868348110-3882840115\n14660092-14975794\n1650201085-1653766664\n1577348597-1594015022\n928333108-935064528\n3359527763-3391750310\n2493422237-2504168537\n4049859084-4050410424\n808181868-814052465\n3874613830-3887590959\n2414207592-2415282578\n2192714364-2213647819\n2620261988-2634878659\n3421336433-3429336343\n2145068049-2158207489\n1367813734-1389219195\n2490910487-2501655457\n4145149273-4152250366\n653475748-657626115\n3354044055-3359527762\n677865088-684199203\n3197386894-3213756607\n2413890103-2414655385\n2435569073-2436676907\n2187512586-2188373926\n2542833514-2559448344\n3572579654-3572646910\n2017351712-2022931296\n5553473-5721362\n640675166-648731596\n2795084400-2804878917\n2609356887-2641179045\n2593669850-2595078437\n4070644525-4083576877\n3952447643-3959969464\n985533706-1018176146\n3981413303-3986034628\n1395736469-1398015062\n3770147570-3771736386\n3049564640-3058068003\n3669109025-3700215305\n586331218-598310839\n2013763822-2017548303\n3259325971-3295497789\n1170438196-1174511625\n893146793-895599310\n4276674223-4280159835\n517139920-555996999\n3700596506-3709565912\n3682493367-3685409046\n1647308172-1649682446\n3850135349-3874541035\n1499363688-1504436967\n2533635168-2540574929\n1508239269-1512070177\n271906508-279234198\n1057947362-1058662323\n2434000862-2434773362\n4069928760-4076838093\n2158118299-2173210733\n1870620487-1874963901\n2517052343-2520191365\n805793864-809890122\n3119674762-3125813778\n2165744152-2184076597\n489482550-490255465\n1394412113-1406168887\n1688791106-1731695014\n2221982373-2252569071\n509411098-512692777\n690237193-723487522\n361691686-400979591\n409813774-429403373\n2479075744-2481943730\n2614997153-2615138853\n138753315-146503262\n1582919319-1588089148\n1111462306-1130533488\n2817276056-2817880217\n3922045147-3951589009\n2458848754-2465651576\n2016288686-2026542989\n3875916854-3885420430\n1819358445-1823011392\n2145320252-2150708967\n3173766775-3186295748\n1124742733-1153625326\n3808566641-3811176751\n3102443342-3103570065\n492056611-501015610\n299335684-312918298\n3558899943-3573860889\n1186125415-1201322109\n1513322537-1541097553\n2581869741-2604753231\n3557617919-3562787573\n2443351935-2462800310\n3700215306-3720331196\n3811735096-3814814473\n3449088496-3453321084\n4038184431-4051388239\n716454294-723662471\n780371402-787696275\n2441289917-2468804258\n2353736566-2376885630\n3908286816-3912629201\n1633135638-1642500049\n4111559476-4135102642\n1653322112-1654018956\n1039455295-1064540912\n1736742501-1737529328\n3059170943-3065265874\n852606650-855213954\n3295497790-3295756455\n4040836405-4047351141\n34353198-41398596\n1692183974-1707916005\n1048943716-1077207190\n3700991866-3721726702\n1661288377-1661519394\n2961925985-2963658715\n2911928114-2915859230\n853205608-856577987\n3883096539-3908286814\n3316435466-3322939929\n3600326622-3624293220\n294216092-296021925\n142225406-143613184\n3223481515-3231699421\n4047939579-4052654319\n10593493-11742652\n1571866528-1582428071\n3868224862-3874921021\n1733465319-1759021943\n140374901-142457673\n2504220157-2523127156\n1967928420-1995956623\n1374999816-1394412111\n2092836480-2097234291\n2188588730-2200239694\n4086645629-4086948153\n1173726445-1197853798\n2118624452-2130408675\n4052654321-4070040102\n874803249-875265847\n915791810-930214990\n2876128871-2891854663\n1166216594-1170304114\n2558656344-2566067825\n3032547997-3034107978\n409533844-417847675\n763326165-770612736\n1226596083-1266177353\n828591072-833358113\n1345792276-1357532116\n1197579007-1200982868\n1894139125-1934259002\n822054687-824550189\n1396307099-1397231865\n1790205358-1807289131\n3094326868-3119674761\n3799035806-3803217007\n3721726704-3754968515\n841012741-874803247\n3840498378-3860805955\n3659695914-3666511687\n622503250-635392806\n1995956625-1998598282\n179163536-184631947\n147006620-153370435\n4089819884-4106849736\n2819423512-2823887988\n3998447441-4018115809\n316775105-332485730\n1873596673-1875758479\n530771781-556775763\n2204589634-2220322499\n3113913197-3121008639\n1448444211-1454866520\n3652721866-3653504520\n3404216248-3405268388\n4182675295-4198570300\n255352265-263634900\n4276722777-4289051171\n1721927940-1723161665\n2826897767-2855838757\n1337359668-1339978852\n2382979588-2393790387\n3654073394-3658478261\n3782544994-3799035804\n4188329897-4211630877\n2963658716-2998320637\n3451432571-3453741879\n2562651834-2567434860\n2486950069-2501046139\n3611478669-3616104106\n3511021819-3549518032\n3758230566-3767068430\n1191506029-1202446209\n219231125-219816356\n1462411319-1464012276\n1569787641-1572527086\n1311860292-1315547903\n1429989499-1437437420\n135664183-143558335\n3914727258-3916071103\n1471033973-1490515863\n1827686776-1834102937\n2441893746-2457455620\n2577465974-2581869739\n1828378028-1828447447\n2507242698-2536227200\n490703380-506563151\n3870274107-3901351871\n2565359-6381735\n3814929925-3840498376\n1775006734-1779308955\n3767068432-3782544993\n490126986-490703378\n2383094618-2409773784\n1960725227-1965554858\n1959828051-1963390089\n139119706-146382463\n241951130-258703134\n153149559-153714140\n3029945372-3037141205\n1094128516-1106309608\n993066495-1033612715\n3671412953-3680108875\n816910858-822955503\n4020983160-4028093132\n1284781999-1286926714\n790424414-799936436\n2707283960-2715226103\n570447483-627718026\n807974973-817894378\n3431718547-3443952967\n2194317541-2215523943\n3989614647-3993925138\n2478679657-2481612117\n1836566878-1840352483\n2232420373-2261771390\n403014712-410743818\n2047708884-2087313829\n2209923477-2221982371\n676720984-679082918\n2065315935-2067342333\n3666511689-3685877680\n2931562466-2939596306\n2002102420-2031435920\n1449029906-1452219358\n1094666459-1107864169\n4159795437-4173026717\n3940699594-3945820962\n1952608448-1961074747\n25578431-30327344\n3936796403-3945735974\n2241985556-2265741391\n2978397189-3011104419\n1820356263-1834012278\n1125129874-1165911944\n1351093053-1388868368\n2695136012-2710933703\n416822916-431004322\n3985767563-3991863544\n2562720447-2569487575\n2883585468-2911928112\n2433649582-2434201906\n1277451821-1293224837\n2748285940-2757807189\n541913187-563986265\n3423500537-3439392036\n2112695644-2112861663\n1834623552-1837111882\n2066343411-2067864185\n1490515865-1516452574\n1619316587-1620102930\n2012483467-2018436181\n1470658235-1476806470\n3055686516-3059572872\n1464985786-1475278434\n2837797335-2842601938\n260452914-269050424\n1655444118-1660245521\n3810437575-3811820227\n2620812261-2621955292\n8797846-8898160\n3966070996-3967714842\n2507277371-2512302315\n3883568275-3901604832\n1770482264-1770749885\n2031435922-2034151802\n2016008864-2018774627\n1235256126-1242304638\n3053174135-3058921180\n1676541058-1688791105\n4151894850-4157295204\n3231210841-3233382083\n524214554-547104233\n974008672-976468125\n1863980174-1873077684\n2261771391-2271482756\n1742271761-1775006732\n4101392823-4124556870\n1305474449-1320547251\n3916415600-3920194992\n2034151803-2047708882\n2971946044-2975097171\n1883910099-1921636748\n3029933838-3030531686\n431004324-452143003\n6381736-6572278\n962120749-977556240\n408315924-419329945\n3177254655-3184138687\n2201400030-2211027743\n144185516-148790937\n489248329-490135980\n2298789212-2307407423\n1406427156-1414175794\n1997537844-2002102419\n2897055611-2907931465\n2036898003-2043832914\n2340924752-2341899776\n3651531794-3653961437\n2416408806-2417403982\n2341841308-2342839058\n2819956485-2826897766\n753078140-780323860\n1912787764-1933732690\n3658512262-3662402246\n568613512-608581930\n1331308255-1339217827\n2208214217-2217761596\n2130408677-2178372173\n674882205-681228966\n1731695016-1737174299\n807594646-821360533\n3659869505-3665103153\n3589683601-3615440532\n1847081-4852291\n2772140253-2787567431\n3607082715-3613107593\n3980322694-3983040781\n3965661351-3967715377\n2321389998-2340924751\n2723678514-2734191352\n3176160664-3183396055\n2087313830-2088007340\n2414701980-2415291970\n384120445-393367368\n1608956525-1647308171\n1975809715-1979788315\n1182300111-1210501223\n2587765468-2587899449\n3240384298-3244209962\n498001069-510433390\n502181868-509590604\n1722606114-1723511765\n4074126463-4080998964\n3965899463-3967805733\n670044565-671955942\n1574009825-1589779145\n2768461131-2782384926\n1589390500-1591710916\n4242385075-4243613632\n1654018957-1676541056\n4026452452-4038184430\n370731507-377702333\n1416892515-1447676948\n671955944-671982480\n1661358788-1661638413\n2620860455-2622167536\n857689748-866284280\n1277265513-1286804775\n2413986300-2415769171\n3427452157-3441299404\n1779900267-1785122611\n257536541-262228939\n2776706637-2788943162\n30146885-30764844\n124248657-137103342\n538057074-538137846\n3821751095-3827013068\n1866675972-1875110376\n1330757760-1338403024\n229290311-247376592\n220344517-221556120\n1033612717-1042439095\n219586004-221068703\n783594805-791480755\n3230747813-3247916095\n3374965918-3389840591\n971778205-982596327\n2434773363-2457398191\n3300575173-3319582719\n1212926504-1226596082\n678898247-681492789\n1506103673-1533979924\n1828376380-1828383805\n4263517131-4272688783\n212030276-229290309\n1735748976-1740874539\n3174657260-3182281606\n1430836020-1451441628\n829961418-839958433\n1660652520-1661464323\n1832743872-1839654436\n2667021873-2700044121\n3232125402-3233384806\n2056189726-2059543792\n3571190891-3576928260\n1660036024-1674545236\n141261139-142401536\n1294730719-1312440914\n1406168888-1406427154\n4031373778-4042188195\n1222515899-1262359655\n215890380-220578007\n14975796-32130998\n3656140012-3659695913\n312918300-331632497\n4196450046-4203629768\n278798522-299335683\n352452453-361151561\n1501985847-1561887967\n3972783164-3974676466\n2875178954-2888406923\n1648379122-1650201083\n1230376291-1239610451\n4042128282-4046828578\n203847063-206685243\n1210501225-1226014714\n448085570-489248328\n1828275465-1828377861\n3014717077-3015329919\n1454866522-1471033972\n1465836464-1483415293\n3653260817-3654409731\n2056154202-2056719190\n4043749730-4047049801\n140558284-142908087\n214891820-219953023\n2050270365-2052917450\n2688443884-2703056941\n8742991-8883499\n192152950-194529718\n1174511626-1193269330\n331632498-343474169\n3813378364-3820993607\n1306694954-1313550446\n103801749-105999226\n232882836-252000431\n62875173-92445303\n32130999-59648491\n2039846746-2040660834\n2040618479-2042227833\n1267828242-1268638794\n3724585570-3755583795\n3015233892-3015465122\n3029147430-3046792177\n6572279-7930589\n2973982436-2979652885\n2360205412-2391769777\n0-1847080\n68510492-91790786\n1930322292-1930943704\n3178171858-3189765272\n492610680-500933487\n453226562-487560847\n117649826-125598812\n1708828053-1717568941\n2478752789-2482439160\n492550604-497775336\n1662381777-1663424714\n540891625-560888932\n725268068-735514807\n2874824446-2876835138\n4239505787-4266258938\n2676568644-2680498302\n4235859233-4258168589\n2609712446-2639427050\n3280862134-3291104119\n3770037523-3791717842\n2674180331-2699814013\n3479546057-3487229794\n2584794634-2589869676\n3118642650-3122375125\n2875715316-2886003370\n3001438362-3004087200\n2727359607-2729064289\n3404295783-3405443957\n3433378532-3444693184\n3786225581-3789622764\n3469569557-3475027155\n3477861475-3497047373\n3594949727-3645723583\n3026813578-3038331328\n2964208749-2968270076\n3262965035-3264162702\n3143170533-3162317153\n3543029824-3546691019\n3529743404-3545604807\n3180438225-3183736951\n3233823029-3240497576\n3401028250-3405865033
        // Answer: 14975795
        //
        // How many IPs are allowed by the blacklist?
        // Answer: 101
        public static uint GetLowestFirewallValue(string input)
        {
            var ranges = new List<Tuple<uint, uint>>();
            var maxValue = 1U;
            
            foreach (var line in input.Split("".ToCharArray(), StringSplitOptions.RemoveEmptyEntries))
            {
                var split = line.Split("-".ToCharArray());
                ranges.Add(new Tuple<uint, uint>(uint.Parse(split[0]), uint.Parse(split[1])));
            }

            ranges = ranges.OrderBy(t => t.Item1).ToList();

            var potentialValues = ranges.TakeWhile(t => t.Item1 <= maxValue + 1).ToList();

            while (potentialValues.Count > 0)
            {
                ranges = ranges.Skip(potentialValues.Count).ToList();
                maxValue = potentialValues.Max(t => t.Item2);
                potentialValues = ranges.TakeWhile(t => t.Item1 <= maxValue + 1).ToList();
            }

            return maxValue + 1;
        }
        
        public static uint CountNumAllowedIps(string input)
        {
            var ranges = new List<Tuple<uint, uint>>();

            foreach (var line in input.Split("".ToCharArray(), StringSplitOptions.RemoveEmptyEntries))
            {
                var split = line.Split("-".ToCharArray());
                ranges.Add(new Tuple<uint, uint>(uint.Parse(split[0]), uint.Parse(split[1])));
            }

            ranges = ranges.OrderBy(t => t.Item1).ToList();

            var index = 0;

            while (index < ranges.Count - 1)
            {
                var first = ranges[index];
                var second = ranges[index + 1];
                
                if (first.Item2 >= second.Item1 - 1)
                {
                    ranges.RemoveRange(index, 2);
                    ranges.Insert(index, new Tuple<uint, uint>(first.Item1, Math.Max(first.Item2, second.Item2)));
                }
                else
                {
                    index++;
                }
            }

            var sum = ranges.Sum(t => t.Item2 - t.Item1 + 1);

            return uint.MaxValue - (uint)sum + 1;
        }
    }
}
